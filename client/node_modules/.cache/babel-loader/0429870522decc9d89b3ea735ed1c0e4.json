{"ast":null,"code":"var _jsxFileName = \"/home/segnidesta60/beekaa-blogs/client/src/components/singlePost/SinglePost.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useContext, useEffect, useState } from 'react';\nimport { useLocation } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { Context } from '../../context/Context';\nimport './singlePost.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SinglePost() {\n  _s();\n\n  const PF = \"http://localhost:4000/images/\";\n  const location = useLocation();\n  const path = location.pathname.split('/')[2];\n  const api = 'http://127.0.0.1:4000/api';\n  const [post, setPost] = useState({});\n  const [title, setTitle] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [updateMode, setUpdateMode] = useState(false);\n  const {\n    user\n  } = useContext(Context);\n  useEffect(() => {\n    const getPost = async () => {\n      const res = await axios.get(api + '/posts/' + path);\n      setPost(res.data);\n      setTitle(res.data.title);\n      setDesc(res.data.desc);\n    };\n\n    getPost();\n  }, [path]);\n\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`${api}/posts/${post._id}`, {\n        data: {\n          username: user.username\n        }\n      });\n      window.location.replace('/');\n    } catch (err) {}\n  };\n\n  const handleUpdate = async () => {\n    try {\n      await axios.put(`${api}/posts/${post._id}`, {\n        username: user.username,\n        title,\n        desc\n      }); //   setUpdateMode(false)\n\n      window.location.reload();\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"singlePost\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"singlePostWrapper\",\n      children: [post.photo && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: PF + post.photo,\n        className: \"singlePostImg\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this), updateMode ? /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: e => setTitle(e.target.value),\n        type: \"text\",\n        value: title,\n        className: \"singlePostTitleInput\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 26\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"singlePostTitle\",\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 14\n      }, this), user.username === post.username && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"singlePostEdit\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"singlePostIcon far fa-edit\",\n          onClick: () => setUpdateMode(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"singlePostIcon far fa-trash-alt\",\n          onClick: handleDelete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"singlePostInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"singlePostAuthor\",\n          children: [\"Author: \", /*#__PURE__*/_jsxDEV(Link, {\n            className: \"link\",\n            to: `/?user=${post.username}`,\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: post.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 84\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"singlePostDate\",\n          children: new Date(post.createdAt).toDateString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), updateMode ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"singlePostDescInput\",\n        value: desc,\n        onChange: e => setDesc(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 14\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"singlePostDesc\",\n        children: post.desc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }, this), updateMode && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"singlePostButton\",\n        onClick: handleUpdate,\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SinglePost, \"IONyvLEycH8C48imVmEOFFTQYYE=\", false, function () {\n  return [useLocation];\n});\n\n_c = SinglePost;\nexport default SinglePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"SinglePost\");","map":{"version":3,"names":["axios","useContext","useEffect","useState","useLocation","Link","Context","SinglePost","PF","location","path","pathname","split","api","post","setPost","title","setTitle","desc","setDesc","updateMode","setUpdateMode","user","getPost","res","get","data","handleDelete","delete","_id","username","window","replace","err","handleUpdate","put","reload","photo","e","target","value","Date","createdAt","toDateString"],"sources":["/home/segnidesta60/beekaa-blogs/client/src/components/singlePost/SinglePost.jsx"],"sourcesContent":["import axios from 'axios'\nimport { useContext, useEffect, useState } from 'react'\nimport { useLocation } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport { Context } from '../../context/Context'\nimport './singlePost.css'\n\nfunction SinglePost() {\n    const PF =\"http://localhost:4000/images/\";\n    const location = useLocation()\n    const path = location.pathname.split('/')[2]\n    const api = 'http://127.0.0.1:4000/api';\n    const [post, setPost] = useState({});\n    const [title, setTitle] = useState(\"\");\n    const [desc, setDesc] = useState(\"\");\n    const [updateMode, setUpdateMode] = useState(false);\n    const {user} = useContext(Context);\n\n    useEffect(()=>{\n        const getPost = async() =>{ \n           const res = await axios.get(api+'/posts/'+path);\n           setPost(res.data);\n           setTitle(res.data.title);\n           setDesc(res.data.desc);\n        }\n        getPost();\n    },[path]);\n\n    const handleDelete = async ()=>{\n        try {\n            await axios.delete(`${api}/posts/${post._id}`,{\n                data:{username:user.username}\n            })\n            window.location.replace('/')\n        } catch (err) {\n            \n        }\n    }\n\n\n  const handleUpdate = async () => {\n    try {\n      await axios.put(`${api}/posts/${post._id}`, {\n        username: user.username,\n        title,\n        desc,\n      });\n      \n    //   setUpdateMode(false)\n      window.location.reload();\n    } catch (err) {}\n  };\n\n\n  return (\n    <div className='singlePost' >\n        <div className=\"singlePostWrapper\">\n            {post.photo && \n            <img src={PF+post.photo} className='singlePostImg' alt=''/>\n            }\n            {updateMode? < input onChange={(e)=>setTitle(e.target.value)} type='text' value={title} className='singlePostTitleInput'/>:\n            (<h1 className=\"singlePostTitle\">\n                {post.title}\n                </h1>)\n            }   \n\n            {user.username === post.username &&\n            <div className=\"singlePostEdit\">\n                <i className=\"singlePostIcon far fa-edit\" onClick={()=>setUpdateMode(true)}></i>\n                <i className=\"singlePostIcon far fa-trash-alt\" onClick={handleDelete}></i>\n            </div>\n            \n            }\n            \n            <div className=\"singlePostInfo\">\n                <span className=\"singlePostAuthor\">\n                    Author: <Link className='link' to={`/?user=${post.username}`}> <b>{post.username}</b></Link>\n                </span>\n                <span className=\"singlePostDate\">{new Date (post.createdAt).toDateString()}</span>\n            </div>\n            {updateMode? \n            \n            (<textarea  \n                className='singlePostDescInput'\n                value={desc} \n                onChange={(e)=>setDesc(e.target.value)}\n               />\n            ):\n           ( (<p className='singlePostDesc'>\n              {post.desc}\n                </p>)\n                \n           )\n                }\n\n        {updateMode && (\n          <button className=\"singlePostButton\" onClick={handleUpdate}>\n            Update\n          </button>\n        )}\n\n        </div>\n    </div>\n  )\n}\n\nexport default SinglePost"],"mappings":"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"},"metadata":{},"sourceType":"module"}